<!DOCTYPE html>
<!--[if IE 8]>         <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> 
<html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Friend Voyage | Traveling just got a lot more social...</title>

    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/foundation.css" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
    <link rel="stylesheet" href="css/jquery.share.css" />

    <style type="text/css">
    #map_canvas{
        height:550px;
        width:100%;
    }
    #selections{
        position:fixed;
        top:55px;
        left:75px;
        width:345px;
    }
    #filterselections{
        background-color: #cccccc;
    }
    label{
        padding:5px;
    }
    h3{
        padding:5px;
        font-size: 12px;
        margin:0;
        margin-left:5px;
    }
    #submitselectionbutton{
        padding:5px;
    }
    #header,
    #footer{
        height:50px;
    }
    #recommendations{
        -moz-column-count:4; /* Firefox */
        -webkit-column-count:4; /* Safari and Chrome */
        column-count:4;
        font-size: 12px;
        padding:5px;
        margin-top:-15px;
        margin-bottom: -20px;
        text-align: center;
    }
    #activities{
        -moz-column-count:8; /* Firefox */
        -webkit-column-count:8; /* Safari and Chrome */
        column-count:8;
        font-size: 8px;
        padding:5px;
        margin-top:-15px;
        margin-bottom: -20px;
        text-align: center;
    }
    #activityicon{
        float:left;
        clear:both;
        margin:5px;
        margin-top:10px;
        height:100%;
    }
    #distance{
        padding: 10px;
        margin:5px;
        margin-top:0;
        float:right;
        font-size: 10px;
        text-align: center;
        width:40px;
        height:40px;
    }
    #data{
        float:left;
        padding:5px;
    }
    #name{
        text-transform: capitalize;
        font-size: 18px;
        width:100%;
        padding-top: 7px;
    }
    #address{
        font-size: 10px;
        width:100%;
        padding-top:5px;
    }
    .pictureselect{
        opacity: .25;
    }
    .pictureselect p{
        font:12px;
        float:left;
    }
    p.title{
        overflow: auto;
    }
    a.infocard{
        padding:0px;
    }
    #results{
        overflow: auto;
        height:425px;
    }
    #navigation{
        margin:-10px;
    }
    #navigation ul li a{
        color:white;
    }
    .small.button{
        background-color: #999999;
        border-color: #555555;
    }
    .small.button:hover{
        background-color: #777777;
    }
    .button-group{
        float:left;
    }
    span{
        margin-left:-5px;    
    }
    #socialnetworks{
        width:50%;
    }
    #publicreview{
        background-color: #31B404;
        width:25%;
        margin-left:74%;
        margin-top:-78px;
        border: 1px solid black;
        text-align: center;
        opacity:.8;
    }
    #friendreview{
        background-color: #31B404;
        width:25%;
        margin-left:48%;
        margin-top:-72px;
        border: 1px solid black;
        text-align: center;
        opacity:.8;
    }
    h2,
    p{
        margin:0px;
    }
    #fullcomments{
        overflow: auto;
        height:85px;
        margin-top: 20px;
    }
    </style>
</head>

<body onload="initMap()">
    <div id="header">
        <img src= "img/friendvoyage.png" style="
        margin-top: 5px;"></img>
    </div>

    <div id="body">
        <div id="map_canvas"></div>
    </div>

    <div id="selections">
        <div id="filterselections">
            <h3 class="subheader">Show me the following:</h3>
            <div id="activities">
                <form class="pictures">
                  <img class="pictureselect" src="img/arts.png" title="arts" id="arts" onclick="selectimage('arts')"/><p>Arts</p>
                  <img class="pictureselect" src="img/coffee.png" title="coffee" id="coffee" onclick="selectimage('coffee')"/><p>Coffee</p>
                  <img class="pictureselect" src="img/drinks.png" title="drinks" id="drinks" onclick="selectimage('drinks')"/><p>Drinks</p>
                  <img class="pictureselect" src="img/family.png" title="family" id="family" onclick="selectimage('family')"/><p>Family</p>
                  <img class="pictureselect" src="img/food.png" title="food" id="food" onclick="selectimage('food')"/><p>Food</p>
                  <img class="pictureselect" src="img/nightlife.png" title="nightlife" id="nightlife" onclick="selectimage('nightlife')"/><p>Nightlife</p>
                  <img class="pictureselect" src="img/shopping.png" title="shopping" id="shopping" onclick="selectimage('shopping')"/><p>Shopping</p>
                  <img class="pictureselect" src="img/sights.png" title="sights" id="sights" onclick="selectimage('sights')"/><p>Sights</p>
              </form>
          </div>
          <h3 class="subheader" style="
          margin-top: -25px;">See results from:</h3>
          <div id="recommendations">
            <form class="custom">
                <label for="checkbox1">
                    <input type="checkbox" id="checkbox1" style="display: none;">
                    <span class="custom checkbox"></span>  Private
                </label>
                <label for="checkbox2">
                    <input type="checkbox" id="checkbox2" style="display: none;">
                    <span class="custom checkbox"></span>  Friends
                </label>
                <label for="checkbox3">
                    <input type="checkbox" id="checkbox3" style="display: none;">
                    <span class="custom checkbox"></span>  Everyone
                </label>
                <label for="checkbox4">
                    <input type="checkbox" id="checkbox4" style="display: none;">
                    <span class="custom checkbox"></span>  Public
                </label>
            </form>
        </div>
    </div>
    <div class="section-container accordion" data-section="accordion" id="results">  

        <section>
            <div class="title" data-section-title>
                <a href="info" class="infocard">
                    <div id="activityicon">
                        <img src="img/food.png"/>
                    </div>
                    <div id="data">
                        <div id="name">
                            Restó Donté Ristorante
                        </div>
                        <div id="address">
                            123 Main St, Los Angeles, CA 90007
                        </div>
                    </div>
                    <div id="distance">
                        <img src="img/map.png"/></br>
                        <span>0.5 mi</span>
                    </div>
                </a>
            </div>
            <div class="content" data-section-content>
                <div id="navigation">
                    <div id="socialnetworks"></div>
                    <div id="friendreview">
                        <h2>75%</h2> 
                        <p>positive</p>
                    </div>
                    <div id="publicreview">
                        <h2>60%</h2> 
                        <p>positive</p>
                    </div> 
                </div>
                <div id="fullcomments">
                    This is the best place you'll ever want to
                    go to. It has everything you want, everything
                    you need, period. Come!
                </div>

            </div>
        </section>
        
        <section>
            <div class="title" data-section-title>
                <a href="info" class="infocard">
                    <div id="activityicon">
                        <img src="img/arts.png"/>
                    </div>
                    <div id="data">
                        <div id="name">
                            Drama Theatrical Inc.
                        </div>
                        <div id="address">
                            123 Main St, Los Angeles, CA 90007
                        </div>
                    </div>
                    <div id="distance">
                        <img src="img/map.png"/></br>
                        <span>1.5 mi</span>
                    </div>
                </a>
            </div>
            <div class="content" data-section-content>
                <div id="navigation">
                    <div id="socialnetworks"></div>
                    <div id="friendreview">
                        <h2>75%</h2> 
                        <p>positive</p>
                    </div>
                    <div id="publicreview">
                        <h2>60%</h2> 
                        <p>positive</p>
                    </div> 
                </div>
                <div id="fullcomments">
                    This is the best place you'll ever want to
                    go to. It has everything you want, everything
                    you need, period. Come!
                </div>

            </div>
        </section>

        <section>
            <div class="title" data-section-title>
                <a href="info" class="infocard">
                    <div id="activityicon">
                        <img src="img/coffee.png"/>
                    </div>
                    <div id="data">
                        <div id="name">
                            Java Desires
                        </div>
                        <div id="address">
                            123 Main St, Los Angeles, CA 90007
                        </div>
                    </div>
                    <div id="distance">
                        <img src="img/map.png"/></br>
                        <span>2.5 mi</span>
                    </div>
                </a>
            </div>
            <div class="content" data-section-content>
                <div id="navigation">
                    <div id="socialnetworks"></div>
                    <div id="friendreview">
                        <h2>75%</h2> 
                        <p>positive</p>
                    </div>
                    <div id="publicreview">
                        <h2>60%</h2> 
                        <p>positive</p>
                    </div> 
                </div>
                <div id="fullcomments">
                    This is the best place you'll ever want to
                    go to. It has everything you want, everything
                    you need, period. Come!
                </div>

            </div>
        </section>

        <section>
            <div class="title" data-section-title>
                <a href="info" class="infocard">
                    <div id="activityicon">
                        <img src="img/drinks.png"/>
                    </div>
                    <div id="data">
                        <div id="name">
                            The Coolest Bar Ever
                        </div>
                        <div id="address">
                            123 Main St, Los Angeles, CA 90007
                        </div>
                    </div>
                    <div id="distance">
                        <img src="img/map.png"/></br>
                        <span>6.5 mi</span>
                    </div>
                </a>
            </div>
            <div class="content" data-section-content>
                <div id="navigation">
                    <div id="socialnetworks"></div>
                    <div id="friendreview">
                        <h2>75%</h2> 
                        <p>positive</p>
                    </div>
                    <div id="publicreview">
                        <h2>60%</h2> 
                        <p>positive</p>
                    </div> 
                </div>
                <div id="fullcomments">
                    This is the best place you'll ever want to
                    go to. It has everything you want, everything
                    you need, period. Come!
                </div>

            </div>
        </section>

        <section>
            <div class="title" data-section-title>
                <a href="info" class="infocard">
                    <div id="activityicon">
                        <img src="img/Family.png"/>
                    </div>
                    <div id="data">
                        <div id="name">
                            Bedtime Stories
                        </div>
                        <div id="address">
                            123 Main St, Los Angeles, CA 90007
                        </div>
                    </div>
                    <div id="distance">
                        <img src="img/map.png"/></br>
                        <span>8.5 mi</span>
                    </div>
                </a>
            </div>
            <div class="content" data-section-content>
                <div id="navigation">
                </div>
            </div>
        </section>

        <section>
            <div class="title" data-section-title>
                <a href="info" class="infocard">
                    <div id="activityicon">
                        <img src="img/nightlife.png"/>
                    </div>
                    <div id="data">
                        <div id="name">
                            The Club Oontz Oontz
                        </div>
                        <div id="address">
                            123 Main St, Los Angeles, CA 90007
                        </div>
                    </div>
                    <div id="distance">
                        <img src="img/map.png"/></br>
                        <span>20.5 mi</span>
                    </div>
                </a>
            </div>
            <div class="content" data-section-content>
                <div id="navigation">
                </div>
            </div>
        </section>

        <section>
            <div class="title" data-section-title>
                <a href="info" class="infocard">
                    <div id="activityicon">
                        <img src="img/shopping.png"/>
                    </div>
                    <div id="data">
                        <div id="name">
                            Hipster Mall
                        </div>
                        <div id="address">
                            123 Main St, Los Angeles, CA 90007
                        </div>
                    </div>
                    <div id="distance">
                        <img src="img/map.png"/></br>
                        <span>29.5 mi</span>
                    </div>
                </a>
            </div>
            <div class="content" data-section-content>
                <div id="navigation">
                </div>
            </div>
        </section>

        <section>
            <div class="title" data-section-title>
                <a href="info" class="infocard">
                    <div id="activityicon">
                        <img src="img/sights.png"/>
                    </div>
                    <div id="data">
                        <div id="name">
                            The Coliseum 
                        </div>
                        <div id="address">
                            123 Main St, Los Angeles, CA 90007
                        </div>
                    </div>
                    <div id="distance">
                        <img src="img/map.png"/></br>
                        <span>36.5 mi</span>
                    </div>
                </a>
            </div>
            <div class="content" data-section-content>
                <div id="navigation">
                </div>
            </div>
        </section>

    </div>
</div>

<div id="footer">
    <div class="large-6 columns">
        <div class="row collapse">
            <div class="small-10 columns">
                <input type="text" id="address" placeholder="Add Location or Drop Pin">
            </div>
            <div class="small-2 columns">
                <a href="#" class="button prefix" id = "valuesubmit" onclick="addtolist(address.value)">Add</a>
            </div>
            <div class="placeselected" id="addingcities">
                <ul class="side-nav">
                    <li>Destinations Selected:</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="js/vendor/custom.modernizr.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script>

<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>

<script src="js/jquery.share.js"></script>                     

<script type="text/javascript">
    //initializes the datepicker
    $('#fromdatepicker').datepicker();
    $('#todatepicker').datepicker();  

    //initializes share
    $(document).ready(function () {
        $('#socialnetworks').share({
            networks: ['facebook','twitter','googleplus','linkedin','pinterest','tumblr','stumbleupon','email'],
            theme: 'square'
        });
    });

    //initializes picture opacity
    //selects the image icon to be placed on the map
    var imageicon;   
    //image selector, which changes the CSS from semi transparent to completely selected
    var selectimage = function(obj){
      if(document.getElementById(obj).style.opacity < "1"){
        document.getElementById(obj).style.opacity = "1";
    }
    else{
        document.getElementById(obj).style.opacity = ".25";
    }
    imageicon = 'img/'+obj+'.png';
}

    //initializes map
    function initMap(){
    //initializing the map
    var map;
    var myOptions = {
        zoom: 2,
        center: latlng = new google.maps.LatLng(0, 0),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var marker = new google.maps.Marker({});

    //initialize auto complete
    var input = document.getElementById('address');
    var autocomplete = new google.maps.places.Autocomplete(input);
    //autocomplete.bindTo('bounds', map);
    var infowindow = new google.maps.InfoWindow();

    google.maps.event.addListener(autocomplete, 'place_changed', function() {
        infowindow.close();
        marker.setVisible(true);
        input.className = '';
        var place = autocomplete.getPlace();
        if (!place.geometry) {
            // Inform the user that the place was not found and return.
            input.className = 'notfound';
            return;
        }

        // If the place has a geometry, then present it on a map.
        if (place.geometry.viewport) {
            map.fitBounds(place.geometry.viewport);
        } 
        else {
            map.setCenter(place.geometry.location);
            map.setZoom(17);  // Why 17? Because it looks good.
        }
        marker.setPosition(place.geometry.location);
        marker.setVisible(true);

        var address = '';
        if (place.address_components) {
            address = [
            (place.address_components[0] && place.address_components[0].short_name || ''),
            (place.address_components[1] && place.address_components[1].short_name || ''),
            (place.address_components[2] && place.address_components[2].short_name || '')
            ].join(' ');
        }

        console.log(place)
        var e = {
            latLng: {
                lat: function () {
                    return place.geometry.location.jb;
                },
                lng: function () {
                    return place.geometry.location.kb;
                }
            }
        }
        addMarkerHandler(e);
        addtolist(place.formatted_address);
    });

google.maps.event.addDomListener(window, 'load', initMap);

//instance of the map
map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
//array to hold all the markers
var markers = {};
//create id for marker
var markeridcreator=function(lat, lng){
    return lat + '_' + lng;
}
//create a lat lng getter
var getlatlng = function(lat, lng){
    return new google.maps.LatLng(lat, lng);
};
//add marker
//var addmarker = google.maps.event.addListener(map, 'click', addMarkerHandler);
var addMarkerHandler = function(e){
    console.log(e);
    var lat = e.latLng.lat();
    var lng = e.latLng.lng();
    var markerid = markeridcreator(lat, lng);
    var marker = new google.maps.Marker({
        position: getlatlng(lat, lng),
        map: map,
        id: 'marker_' + markerid,
//icon: 'img/marker.png'
});
    markers[markerid] = marker;
    markerevent(marker);
//reverse lookup
var geocoder = new google.maps.Geocoder();
var infowindow = new google.maps.InfoWindow();
var latlng = getlatlng(lat, lng);
geocoder.geocode({'latLng': latlng}, function(results) {
    infowindow.setContent(results[1].formatted_address);
    //infowindow.open(map, marker);   
});
google.maps.event.addListener(marker, 'click', function() {
    infowindow.open(map,marker);
});
}
//marker event binder
var markerevent = function(marker){
    google.maps.event.addListener(marker, "rightclick", function(e){
        var markerid = markeridcreator(e.latLng.lat(), e.latLng.lng());
        var marker = markers[markerid];
        deletemarker(marker, markerid);
    });
};
//marker delete
var deletemarker = function(marker, markerid){
    marker.setMap(null);
    delete markers[markerid];
};  
}
</script>

<script>
    //add the inputted item in the list
    var addtolist = function(val){
        $("#addingcities ul").append('<li><a href="#">'+val+'</a></li>');
        $("#valuesubmit").val("");
    }
    </script>

    <script>
        //must add in order for foundation to work
        document.write('<script src=' +
            ('__proto__' in {} ? 'js/vendor/zepto' : 'js/vendor/jquery') +
            '.js><\/script>')
        </script>
        <script src="js/foundation/foundation.js"></script>
        <script src="js/foundation/foundation.alerts.js"></script>
        <script src="js/foundation/foundation.clearing.js"></script>
        <script src="js/foundation/foundation.cookie.js"></script>
        <script src="js/foundation/foundation.dropdown.js"></script>
        <script src="js/foundation/foundation.forms.js"></script>
        <script src="js/foundation/foundation.joyride.js"></script>
        <script src="js/foundation/foundation.magellan.js"></script>
        <script src="js/foundation/foundation.orbit.js"></script>
        <script src="js/foundation/foundation.placeholder.js"></script>
        <script src="js/foundation/foundation.reveal.js"></script>
        <script src="js/foundation/foundation.section.js"></script>
        <script src="js/foundation/foundation.tooltips.js"></script>
        <script src="js/foundation/foundation.topbar.js"></script>
        <script>
        $(document).foundation();
        </script>

    </body>
    </html>